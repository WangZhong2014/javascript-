{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[127],{342:function(t,s,a){\"use strict\";a.r(s);var n=a(0),r=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a(\"div\",{staticClass:\"content\"},[a(\"p\",[a(\"a\",{attrs:{href:\"https://travis-ci.org/NodeRedis/node-redis-parser\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"img\",{attrs:{src:\"https://travis-ci.org/NodeRedis/node-redis-parser.png?branch=master\",alt:\"Build Status\"}})]),a(\"a\",{attrs:{href:\"https://codeclimate.com/github/NodeRedis/node-redis-parser/coverage\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"img\",{attrs:{src:\"https://codeclimate.com/github/NodeRedis/node-redis-parser/badges/coverage.svg\",alt:\"Test Coverage\"}})]),a(\"a\",{attrs:{href:\"http://standardjs.com/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[a(\"img\",{attrs:{src:\"https://img.shields.io/badge/code%20style-standard-brightgreen.svg\",alt:\"js-standard-style\"}})])]),a(\"h1\",{attrs:{id:\"redis-parser\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#redis-parser\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" redis-parser\")]),a(\"p\",[t._v(\"A high performance javascript redis parser built for \"),a(\"a\",{attrs:{href:\"https://github.com/NodeRedis/node_redis\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"node_redis\")]),t._v(\" and \"),a(\"a\",{attrs:{href:\"https://github.com/luin/ioredis\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"ioredis\")]),t._v(\". Parses all \"),a(\"a\",{attrs:{href:\"http://redis.io/topics/protocol\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"RESP\")]),t._v(\" data.\")]),a(\"h2\",{attrs:{id:\"install\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#install\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Install\")]),a(\"p\",[t._v(\"Install with \"),a(\"a\",{attrs:{href:\"https://npmjs.org/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[t._v(\"NPM\")]),t._v(\":\")]),a(\"pre\",[a(\"code\",[t._v(\"npm install redis-parser\\n\")])]),a(\"h2\",{attrs:{id:\"usage\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#usage\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Usage\")]),a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" Parser \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"require\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'redis-parser'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" myParser \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"Parser\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"options\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),a(\"h3\",{attrs:{id:\"options\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#options\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Options\")]),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"returnReply\")]),t._v(\": \"),a(\"em\",[t._v(\"function\")]),t._v(\"; mandatory\")]),a(\"li\",[a(\"code\",[t._v(\"returnError\")]),t._v(\": \"),a(\"em\",[t._v(\"function\")]),t._v(\"; mandatory\")]),a(\"li\",[a(\"code\",[t._v(\"returnFatalError\")]),t._v(\": \"),a(\"em\",[t._v(\"function\")]),t._v(\"; optional, defaults to the returnError function\")]),a(\"li\",[a(\"code\",[t._v(\"returnBuffers\")]),t._v(\": \"),a(\"em\",[t._v(\"boolean\")]),t._v(\"; optional, defaults to false\")]),a(\"li\",[a(\"code\",[t._v(\"stringNumbers\")]),t._v(\": \"),a(\"em\",[t._v(\"boolean\")]),t._v(\"; optional, defaults to false\")])]),a(\"h3\",{attrs:{id:\"functions\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#functions\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Functions\")]),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"reset()\")]),t._v(\": reset the parser to it's initial state\")]),a(\"li\",[a(\"code\",[t._v(\"setReturnBuffers(boolean)\")]),t._v(\": (JSParser only) set the returnBuffers option on/off without resetting the parser\")]),a(\"li\",[a(\"code\",[t._v(\"setStringNumbers(boolean)\")]),t._v(\": (JSParser only) set the stringNumbers option on/off without resetting the parser\")])]),a(\"h3\",{attrs:{id:\"error-classes\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#error-classes\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Error classes\")]),a(\"ul\",[a(\"li\",[a(\"code\",[t._v(\"RedisError\")]),t._v(\" sub class of Error\")]),a(\"li\",[a(\"code\",[t._v(\"ReplyError\")]),t._v(\" sub class of RedisError\")]),a(\"li\",[a(\"code\",[t._v(\"ParserError\")]),t._v(\" sub class of RedisError\")])]),a(\"p\",[t._v(\"All Redis errors will be returned as \"),a(\"code\",[t._v(\"ReplyErrors\")]),t._v(\" while a parser error is returned as \"),a(\"code\",[t._v(\"ParserError\")]),t._v(\".\"),a(\"br\"),t._v(\"\\nAll error classes are exported by the parser.\")]),a(\"h3\",{attrs:{id:\"example\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#example\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Example\")]),a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" Parser \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"require\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v('\"redis-parser\"')]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"Library\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\nLibrary\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"prototype\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function-variable function\"}},[t._v(\"returnReply\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"reply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\nLibrary\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"prototype\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function-variable function\"}},[t._v(\"returnError\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\nLibrary\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"prototype\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function-variable function\"}},[t._v(\"returnFatalError\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"...\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" lib \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"Library\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" parser \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"Parser\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    returnReply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"reply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        lib\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"returnReply\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"reply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    returnError\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        lib\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"returnError\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    returnFatalError\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        lib\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"returnFatalError\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\nLibrary\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"prototype\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function-variable function\"}},[t._v(\"streamHandler\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"this\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"stream\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"on\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token string\"}},[t._v(\"'data'\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"buffer\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// Here the data (e.g. `new Buffer('$5\\\\r\\\\nHello\\\\r\\\\n'`)) is passed to the parser and the result is passed to either function depending on the provided data.\")]),t._v(\"\\n        parser\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"execute\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"buffer\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\")])]),a(\"p\",[t._v(\"You do not have to use the returnFatalError function. Fatal errors will be returned in the normal error function in that case.\")]),a(\"p\",[t._v(\"And if you want to return buffers instead of strings, you can do this by adding the \"),a(\"code\",[t._v(\"returnBuffers\")]),t._v(\" option.\")]),a(\"p\",[t._v(\"If you handle with big numbers that are to large for JS (Number.MAX_SAFE_INTEGER === 2^53 - 16) please use the \"),a(\"code\",[t._v(\"stringNumbers\")]),t._v(\" option. That way all numbers are going to be returned as String and you can handle them safely.\")]),a(\"pre\",{pre:!0,attrs:{class:\"language-js\"}},[a(\"code\",[a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// Same functions as in the first example\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" parser \"),a(\"span\",{attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"new\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token class-name\"}},[t._v(\"Parser\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    returnReply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"reply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        lib\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"returnReply\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"reply\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    returnError\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token keyword\"}},[t._v(\"function\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        lib\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{attrs:{class:\"token function\"}},[t._v(\"returnError\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"err\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"\\n    returnBuffers\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// All strings are returned as Buffer e.g. <Buffer 48 65 6c 6c 6f>\")]),t._v(\"\\n    stringNumbers\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token boolean\"}},[t._v(\"true\")]),t._v(\" \"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// All numbers are returned as String\")]),t._v(\"\\n\"),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n\\n\"),a(\"span\",{attrs:{class:\"token comment\"}},[t._v(\"// The streamHandler as above\")]),t._v(\"\\n\")])]),a(\"h2\",{attrs:{id:\"protocol-errors\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#protocol-errors\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Protocol errors\")]),a(\"p\",[t._v(\"To handle protocol errors (this is very unlikely to happen) gracefully you should add the returnFatalError option, reject any still running command (they might have been processed properly but the reply is just wrong), destroy the socket and reconnect. Note that while doing this no new command may be added, so all new commands have to be buffered in the meantime, otherwise a chunk might still contain partial data of a following command that was already processed properly but answered in the same chunk as the command that resulted in the protocol error.\")]),a(\"h2\",{attrs:{id:\"contribute\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#contribute\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" Contribute\")]),a(\"p\",[t._v(\"The parser is highly optimized but there may still be further optimizations possible.\")]),a(\"pre\",[a(\"code\",[t._v(\"npm install\\nnpm test\\nnpm run benchmark\\n\")])]),a(\"p\",[t._v(\"Currently the benchmark compares the performance against the hiredis parser:\")]),a(\"pre\",[a(\"code\",[t._v(\"HIREDIS: $ multiple chunks in a bulk string x 859,880 ops/sec ±1.22% (82 runs sampled)\\nHIREDIS BUF: $ multiple chunks in a bulk string x 608,869 ops/sec ±1.72% (85 runs sampled)\\nJS PARSER: $ multiple chunks in a bulk string x 910,590 ops/sec ±0.87% (89 runs sampled)\\nJS PARSER BUF: $ multiple chunks in a bulk string x 1,299,507 ops/sec ±2.18% (84 runs sampled)\\n\\nHIREDIS: + multiple chunks in a string x 1,787,203 ops/sec ±0.58% (96 runs sampled)\\nHIREDIS BUF: + multiple chunks in a string x 943,584 ops/sec ±1.62% (87 runs sampled)\\nJS PARSER: + multiple chunks in a string x 2,008,264 ops/sec ±1.01% (91 runs sampled)\\nJS PARSER BUF: + multiple chunks in a string x 2,045,546 ops/sec ±0.78% (91 runs sampled)\\n\\nHIREDIS: $ 4mb bulk string x 310 ops/sec ±1.58% (75 runs sampled)\\nHIREDIS BUF: $ 4mb bulk string x 471 ops/sec ±2.28% (78 runs sampled)\\nJS PARSER: $ 4mb bulk string x 747 ops/sec ±2.43% (85 runs sampled)\\nJS PARSER BUF: $ 4mb bulk string x 846 ops/sec ±5.52% (72 runs sampled)\\n\\nHIREDIS: + simple string x 2,324,866 ops/sec ±1.61% (90 runs sampled)\\nHIREDIS BUF: + simple string x 1,085,823 ops/sec ±2.47% (82 runs sampled)\\nJS PARSER: + simple string x 4,567,358 ops/sec ±1.97% (81 runs sampled)\\nJS PARSER BUF: + simple string x 5,433,901 ops/sec ±0.66% (93 runs sampled)\\n\\nHIREDIS: : integer x 2,332,946 ops/sec ±0.47% (93 runs sampled)\\nJS PARSER: : integer x 17,730,449 ops/sec ±0.73% (91 runs sampled)\\nJS PARSER STR: : integer x 12,942,037 ops/sec ±0.51% (92 runs sampled)\\n\\nHIREDIS: : big integer x 2,012,572 ops/sec ±0.33% (93 runs sampled)\\nJS PARSER: : big integer x 10,210,923 ops/sec ±0.94% (94 runs sampled)\\nJS PARSER STR: : big integer x 4,453,320 ops/sec ±0.52% (94 runs sampled)\\n\\nHIREDIS: * array x 44,479 ops/sec ±0.55% (94 runs sampled)\\nHIREDIS BUF: * array x 14,391 ops/sec ±1.04% (86 runs sampled)\\nJS PARSER: * array x 53,796 ops/sec ±2.08% (79 runs sampled)\\nJS PARSER BUF: * array x 72,428 ops/sec ±0.72% (93 runs sampled)\\n\\nHIREDIS: * big nested array x 217 ops/sec ±0.97% (83 runs sampled)\\nHIREDIS BUF: * big nested array x 255 ops/sec ±2.28% (77 runs sampled)\\nJS PARSER: * big nested array x 242 ops/sec ±1.10% (85 runs sampled)\\nJS PARSER BUF: * big nested array x 375 ops/sec ±1.21% (88 runs sampled)\\n\\nHIREDIS: - error x 78,821 ops/sec ±0.80% (93 runs sampled)\\nJS PARSER: - error x 143,382 ops/sec ±0.75% (92 runs sampled)\\n\\nPlatform info:\\nUbuntu 16.10\\nNode.js 7.4.0\\nIntel(R) Core(TM) i7-5600U CPU\\n\")])]),a(\"h2\",{attrs:{id:\"license\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#license\",\"aria-hidden\":\"true\"}},[t._v(\"#\")]),t._v(\" License\")]),a(\"p\",[a(\"a\",{attrs:{href:\"./LICENSE\"}},[t._v(\"MIT\")])])])}],!1,null,null,null);s.default=r.exports}}]);","extractedComments":[]}