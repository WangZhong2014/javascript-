# 13 Web浏览器中的JavaScript

web浏览器如何呈现web页面。
一些静态页面，叫做文档（document）。
一些则是有丰富的交互，图形化，叫做应用。
还有一些介乎在两者之间。

## 13.1 客户端js
Window对象是所有客户端JavaScript特性和api的主要接入点。它表示web浏览器的一个窗口或窗体，并且可以用标识符window来引用它。

Window对象定义了一些属性，比如指代Location对象的location属性，Location对象指定当前显示在窗口中的url，并允许脚本往窗口中载入新的url。
```js
wondow.location = "https://www.baidu.com";
c

setTimeout(fucntion() {
    alert("hello world";)// 并没有写入window属性
}, 2000);
```
在客户端js中，Window对象也是全局对象。这意味着Window对象处于作用域的顶部，它的属性和方法实际上是全局变量和全局函数。（可以省略不写）
- Window对象有一个引用自身的属性，window。
- Window对象中最重要的一个属性是document，它是引用Document对象，表示显示在窗口中的文档。
- getElementById()返回的Element对象有其他重要的属性和方法，每个Element对象都有style和className属性，允许脚本指定元素的css样式，或许。

- Window,Document,Element对象上另一个重要的属性集合是事件处理程序的相关属性。可以在脚本中位置绑定一个函数，这个函数会在某个时间发生时以异步的方式调用。
- 事件处理程序的属性名是以单词"on"开始的。

### 13.1.1 web文档中的js
js可以通过document对象和它包含的element对象历遍和管理文档内容。
可以通过操纵css样式和类，修改文档的内容呈现。

## 13.2 在HTML中嵌入js
4种方法：
1. 内联，放到script标签之间。
2. 外联，防止在由script标签的src属性指定的外部文件中。
3. 放置在HTML事件处理程序中，由onclick或onmouseover属性来制定。
4. 放置到url中，根据特殊的'javascript: '协议。

现在1,3,4都用的少。
根据MVC原则，主张内容(HTML)和行为(JavaScript)应该尽量保持分离。Js最好通过`<script>`元素的src属性来嵌入HTML文档中。

#### 13.2.1 <script>元素
在XHTML中，`<script>`标签中的内容被当成其他内容一样来对待。如果js代码中包含了"<"或"&"字符等支付，可能会被解释成XHML标记。
所以应该这样写：
```html
<script><![CDATA][
// js代码
]></script>
```
### 13.2.2 外部文件中的脚本
- 使用src属性时，<script>和</script>标签之间的任何内容都会忽略，可以在里面添加代码的补充说明文档或版权信息。但是，若有任何非空格或js注释的文本出现在script标签之间，html5校验器会报错。

使用src属性载入js的一些优点：
- 大块js代码可以从html文件中删除，有利于保持内容和行为的分离，从而简化html文件。
- 如果多个web页面有相同的js代码，用src属性可以让你只管理一份代码，而不用在代码间编辑每个html文件。
- 如果一个js代码由多个页面共享，就只需要下载它一次，通过使用它的第一个页面。
- 由于src属性的值可以是任何url，因此来自一个web服务器的js程序或web页面可以使用由另一个web服务器输出的代码。
- 从其他网站载入脚本的能力，可以让我们更好的利用缓存。

从文档服务器之外的服务器里载入脚本有重要的安全隐患。同源安全策略会组织一个域的文档中的js和另一个域的内容进行交互。但是，要注意和脚本本身的来源并没有关系，而是和脚本嵌入的文档的来源有关系。

因此，同源策略并不适用于如下情况：
即便代码和文档有着不同的来源，js代码 也可以和它嵌入的文档进行交互。当在页面中使用src属性包含一个脚本时，就给了脚本作者完全控制web页面的权限。
